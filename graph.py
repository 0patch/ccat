import networkx as nx
import matplotlib.pyplot as plt

# 4 switches
hr={'Ethernet0/0': {'unknown_iface': 1}, 'Ethernet0/1': {'shutdown': 'no', 'vlans': [10, 20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet0/2': {'unknown_iface': 1}, 'Ethernet0/3': {'unknown_iface': 1}, 'Ethernet1/0': {'unknown_iface': 1}, 'Ethernet1/1': {'shutdown': 'no', 'vlans': [30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet1/2': {'unknown_iface': 1}, 'Ethernet1/3': {'unknown_iface': 1}, 'Ethernet2/0': {'unknown_iface': 1}, 'Ethernet2/1': {'unknown_iface': 1}, 'Ethernet2/2': {'unknown_iface': 1}, 'Ethernet2/3': {'unknown_iface': 1}, 'Ethernet3/0': {'shutdown': 'no', 'vlans': [20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/1': {'shutdown': 'no', 'vlans': [20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/2': {'shutdown': 'no', 'vlans': [20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/3': {'shutdown': 'no', 'vlans': [20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Vlan1': {'shutdown': 'yes'}}
srv={'Ethernet0/0': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet0/1': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet0/2': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet0/3': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet1/0': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet1/1': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet1/2': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet1/3': {'shutdown': 'no', 'vlans': [30,40], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet2/0': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet2/1': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet2/2': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet2/3': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet3/0': {'shutdown': 'no', 'vlans': [40], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet3/1': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet3/2': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Ethernet3/3': {'shutdown': 'no', 'vlans': [], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}}, 'Vlan1': {'shutdown': 'yes'}}
mng={'Ethernet0/0': {'unknown_iface': 1}, 'Ethernet0/1': {'unknown_iface': 1}, 'Ethernet0/2': {'unknown_iface': 1}, 'Ethernet0/3': {'unknown_iface': 1}, 'Ethernet1/0': {'unknown_iface': 1}, 'Ethernet1/1': {'shutdown': 'no', 'vlans': [20, 30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet1/2': {'shutdown': 'no', 'vlans': [10, 30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet1/3': {'shutdown': 'no', 'vlans': [30, 40], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet2/0': {'unknown_iface': 1}, 'Ethernet2/1': {'unknown_iface': 1}, 'Ethernet2/2': {'unknown_iface': 1}, 'Ethernet2/3': {'unknown_iface': 1}, 'Ethernet3/0': {'shutdown': 'no', 'vlans': [30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/1': {'shutdown': 'no', 'vlans': [30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/2': {'shutdown': 'no', 'vlans': [30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/3': {'shutdown': 'no', 'vlans': [30], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Vlan1': {'shutdown': 'yes'}}
msk={'Ethernet0/0': {'unknown_iface': 1}, 'Ethernet0/1': {'shutdown': 'no', 'vlans': [10, 20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet0/2': {'unknown_iface': 1}, 'Ethernet0/3': {'unknown_iface': 1}, 'Ethernet1/0': {'unknown_iface': 1}, 'Ethernet1/1': {'unknown_iface': 1}, 'Ethernet1/2': {'shutdown': 'no', 'vlans': [20], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'trunk'}, 'Ethernet1/3': {'unknown_iface': 1}, 'Ethernet2/0': {'unknown_iface': 1}, 'Ethernet2/1': {'unknown_iface': 1}, 'Ethernet2/2': {'unknown_iface': 1}, 'Ethernet2/3': {'unknown_iface': 1}, 'Ethernet3/0': {'shutdown': 'no', 'vlans': [10], 'cdp': 'yes', 'dhcp_snoop': {'mode': 'untrust'}, 'arp_insp': {'mode': 'untrust'}, 'storm control': {'type': []}, 'port-security': {}, 'ipv6': {}, 'type': 'access'}, 'Ethernet3/1': {'unknown_iface': 1}, 'Ethernet3/2': {'unknown_iface': 1}, 'Ethernet3/3': {'unknown_iface': 1}, 'Vlan1': {'shutdown': 'yes'}}

sets=[]
ifaces=[hr,srv,mng,msk]
ifaces2=['hr','srv','mng','msk']
k=-1
for iface in ifaces:
    dct={}
    k+=1
    for each in iface:
        if 'vlans' in iface[each] and len(iface[each]['vlans'])>0:
            dct.update({each:iface[each]['vlans']})
    print(dct)

    for i in dct:
        if len(dct[i])>1:
            lst=dct[i]
            for j in lst:
                sets.append((ifaces2[k]+' '+i,j))
        else:
            sets.append((ifaces2[k]+' '+i,dct[i][0]))
    print(sets)

# draw graph
G=nx.Graph()
elist=sets
G.add_edges_from(elist)
pos = nx.spring_layout(G)
nx.draw(G, pos, font_size=16, with_labels=False)
for p in pos:  # raise text positions
    pos[p][1] += 0.07
nx.draw_networkx_labels(G, pos)

plt.show()
